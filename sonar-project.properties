# SonarQube Scanner Configuration for HatShop
# Run with: sonar-scanner

# Project identification
sonar.projectKey=hatshop
sonar.projectName=HatShop
sonar.projectVersion=1.0

# Source code location
sonar.sources=.

# Server connection
sonar.host.url=http://localhost:9000

# Source file inclusions (only analyze these paths)
sonar.inclusions=src/**

# Source file exclusions (skip these paths)
sonar.exclusions=**/vendor/**,**/node_modules/**

# Encoding
sonar.sourceEncoding=UTF-8

# Language-specific settings
sonar.php.file.suffixes=php,php3,php4,php5,phtml,inc

# Code Coverage
sonar.php.coverage.reportPaths=coverage/*clover.xml

# Coverage exclusions - config files and bootstrap files that are not unit testable
# Also exclude c04+ which don't have unit tests yet
sonar.coverage.exclusions=**/config.php,**/app_top.php,**/app_bottom.php,**/index.php,**/page.php,**/smarty_plugins/**

# Test file patterns
sonar.tests=src
sonar.test.inclusions=**/tests/**

# Issue exclusions - Smarty plugins require specific naming conventions (smarty_modifier_*, smarty_function_*)
# These are framework-mandated and cannot be changed
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5
sonar.issue.ignore.multicriteria.e1.ruleKey=php:S100
sonar.issue.ignore.multicriteria.e1.resourceKey=**/smarty_plugins/**
sonar.issue.ignore.multicriteria.e2.ruleKey=php:S116
sonar.issue.ignore.multicriteria.e2.resourceKey=**/smarty_plugins/**
# require_once for plugin loading via glob is a legitimate pattern
sonar.issue.ignore.multicriteria.e3.ruleKey=php:S4833
sonar.issue.ignore.multicriteria.e3.resourceKey=**/presentation/page.php
# require_once for bootstrap files in entry points is a legitimate pattern
sonar.issue.ignore.multicriteria.e4.ruleKey=php:S4833
sonar.issue.ignore.multicriteria.e4.resourceKey=**/index.php
# require_once for plugin loading in app presentation Page.php
sonar.issue.ignore.multicriteria.e5.ruleKey=php:S4833
sonar.issue.ignore.multicriteria.e5.resourceKey=**/presentation/Page.php
